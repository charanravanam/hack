<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gatekeeper: Secure Cyber Access</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    html, body { width:100vw; min-height:100vh; margin:0; padding:0; font-family:'Fira Mono','Hack','IBM Plex Mono',monospace; background:#15191c; color:#39ff14; overflow-x:hidden;}
    body::before { content:""; position:fixed;left:0;top:0;width:100vw;height:100vh;z-index:0; background:radial-gradient(ellipse at top right,#39ff1457 0px,transparent 670px),radial-gradient(ellipse at bottom left,#00ffd87c 0px,transparent 570px); opacity:.14;pointer-events:none;}
    .main-container { min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;position:relative;z-index:2;width:100vw;}
    .intro-panel { width:97vw;max-width:420px;background:rgba(20,30,38,0.92);border-radius:16px;border:2px solid #00ffc9a0;box-shadow:0 0 22px #00ffc9dd,0 0 92px #39ff1435,0 2px 18px #00082955;margin:2.7em auto 1.6em auto;padding:2em 1.5em 1.3em 1.5em;display:flex;flex-direction:column;align-items:center;position:relative;backdrop-filter:blur(6px);animation:floatPanel 1.8s cubic-bezier(.31,1.2,.51,1) 1 forwards;opacity:0.99;}
    @keyframes floatPanel { from{opacity:0.0;transform:translateY(60px) scale(0.93);}to{opacity:0.99;transform:translateY(0) scale(1);} }
    .site-title {color:#39ff14;font-size:2em;text-align:center;font-family:inherit;font-weight:800;background:linear-gradient(95deg,#39ff14 63%,#00ffd8 98%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:2px;margin:0 0 0.55em 0;text-shadow:0 1px 18px #39ff1440;}
    .intro-desc { font-size:1.05em;text-align:center;color:#33fd61;margin:0 0 1.7em 0;font-weight:600;line-height:1.6;text-shadow:0 0 11px #00ffd941;}
    .access-info {font-size:0.97em;color:#82ffd0;text-align:center;margin-bottom:0.8em;letter-spacing:0.7px;background:rgba(27,38,42,0.32);border-radius:7px;padding:0.6em 0.9em;box-shadow:0 1px 10px #39ff1412;line-height:1.55;}
    .btn-contact {font-size:1.09em;font-weight:700;background:linear-gradient(90deg,#00ffd8 40%,#39ff14 100%);color:#18291a;border:none;border-radius:7px;padding:0.75em 1.4em;cursor:pointer;letter-spacing:1.2px;margin-top:0.3em;transition:filter 0.13s;outline:none;box-shadow:0 0 14px #39ff1445;}
    .btn-contact:hover,.btn-contact:focus{filter:brightness(1.13); box-shadow:0 0 39px #00ffb3ed; outline:2.5px solid #18fca9;}
    .entry-panel{ width:97vw;max-width:380px;background:rgba(18,24,34,0.97);border-radius:14px;border:2.5px solid #39ff14bb;box-shadow:0 0 32px #00ffd8,0 0 32px #39ff143c,0 1.5px 22px #00082999;padding:1.7em 1.3em 2.1em 1.3em;display:flex;flex-direction:column;align-items:stretch;position:relative;z-index:4;margin-bottom:2em; animation:floatPanel 1.2s cubic-bezier(.31,1.2,.51,1) 1 0.5s backwards;}
    .entry-panel h2{color:#39ff14;font-size:1.42em;text-align:center;margin-bottom:0.7em;font-weight:700;letter-spacing:1px;text-shadow:0 0 14px #39ff1430;background:linear-gradient(90deg,#39ff14 50%,#00ffd8 98%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
    .label-access{color:#61ffa3;font-size:1.06em;font-weight:bold;margin:0 0 .38em 0;letter-spacing:.8px;text-align:left;}
    .input-cyber{width:100%; font-size:1.17em; background:#141a1cdd; color:#39ff14; border:2px solid #39ff146c;border-radius:11px;padding:1.1em 1em;font-weight:700;margin-bottom:1.1em;outline:none;letter-spacing:1.2px;box-shadow:0 2px 15px #39ff1423 inset,0 0 9px #003c1e2f;text-align:center;transition:border-color 0.22s,box-shadow 0.19s;caret-color:#00ffd8;}
    .input-cyber:focus{border-color:#00ffd8;box-shadow:0 2px 19px #39ff14bb,0 0 20px #00ffb34c;}
    .unlock-btn{font-family:inherit;font-size:1.14em;width:100%;background:linear-gradient(90deg,#39ff14 66%,#00ffd8 100%);color:#05120c;padding:0.93em 0;border:none;font-weight:800;border-radius:10px;cursor:pointer;box-shadow:0 0 14px #39ff1430;letter-spacing:1px;transition:background 0.13s,box-shadow 0.15s,color 0.17s;margin-top:0.45em;outline:none;}
    .unlock-btn:disabled { opacity: 0.67; pointer-events: none; }
    .unlock-btn:hover, .unlock-btn:focus {background:linear-gradient(90deg,#00ffd8 36%,#39ff14 90%);color:#007156;box-shadow:0 0 25px #1cffa867; outline:2px solid #00ffd8;}
    .error-message{color:#fd2774; min-height:1.7em; font-size:1.04em; font-weight:bold; text-align:center; letter-spacing:.6px; background:transparent; transition:color 0.16s;}
    @media (max-width:600px){.intro-panel, .entry-panel {margin:1.45em auto 1em auto;padding:1.25em 0.7em;} .site-title{font-size:1.28em;} .entry-panel{max-width:99vw;}}
    @media (min-width:900px){.main-container{max-width:1100px;} .intro-panel,.entry-panel{max-width:480px;}}
  </style>
</head>
<body>
  <div class="main-container">
    <section class="intro-panel" aria-label="About This Website">
      <div class="site-title">Gatekeeper</div>
      <div class="intro-desc">
        Welcome to <b>Gatekeeper</b>, a high-security cyber lab interface for ethical hacking, CTFs, and
        learning advanced cybersecurity in a responsible, legal, and supervised environment.<br>
        All tools, guides, and chat assistants are strictly for those with verified access.
      </div>
      <div class="access-info">
        <span style="font-weight:bold; color:#00ffd8;">Why is access restricted?</span><br />
        Content here is highly sensitive. Only approved students, researchers, or invited experts can access the
        system.<br>
        <span style="color:#39ff14; font-weight:600;">How to get an access code:</span>
        <ul style="padding-left:1.1em; text-align:left; color:#82ffd0; margin-top:.38em; margin-bottom:.1em;">
          <li>Contact your instructor or team lead directly.</li>
          <li>Submit a validated identity proof via secure channel.</li>
          <li>Participate in official CTFs, hackathons, or training events.</li>
        </ul>
        Codes are changed frequently for security. If you do not have access, reach out below.
      </div>
      <button class="btn-contact" onclick="window.location='mailto:securityadmin@yourdomain.com'">
        Contact Security Admin
      </button>
    </section>
    <form class="entry-panel" id="code-access-form" autocomplete="off" aria-label="Access Code Entry">
      <h2>Enter Access Code</h2>
      <label for="access-code" class="label-access">Access Code</label>
      <input type="text" id="access-code" class="input-cyber" autocomplete="off" required maxlength="48"
        autocapitalize="off" inputmode="text" aria-label="Access Code">
      <button type="submit" class="unlock-btn" id="unlock-btn" aria-label="Unlock Access">Unlock</button>
      <div class="error-message" id="error-msg" aria-live="polite"></div>
    </form>
  </div>
  <script>
    const codeInput = document.getElementById('access-code');
    const codeForm = document.getElementById('code-access-form');
    const errorMsg = document.getElementById('error-msg');
    const unlockBtn = document.getElementById('unlock-btn');

    codeForm.onsubmit = async function (e) {
      e.preventDefault();
      errorMsg.textContent = '';
      unlockBtn.disabled = true;
      unlockBtn.textContent = "Validating...";
      const code = codeInput.value.trim();
      try {
        const res = await fetch('/.netlify/functions/verify-access', {
          method: 'POST',
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ code })
        });
        const data = await res.json();
        if (data.success) {
          localStorage.setItem("hasAccess", "true");
          document.body.style.background = "#10160c";
          setTimeout(() => { window.location.href = "/chat.html"; }, 560);
        } else {
          errorMsg.textContent = data.error || "Invalid or expired code. Contact admin for access.";
          codeInput.value = "";
          codeInput.focus();
        }
      } catch (err) {
        errorMsg.textContent = "Network error. Try again.";
      }
      unlockBtn.disabled = false;
      unlockBtn.textContent = "Unlock";
    };
    document.addEventListener('DOMContentLoaded', () => { codeInput.focus(); });
    codeInput.addEventListener('keydown', e => { if (e.key === "Enter") unlockBtn.click(); });
  </script>
</body>
</html>
