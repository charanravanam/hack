<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gatekeeper Access</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    html, body {
      height: 100vh;
      min-height: 100vh;
      margin: 0;
      padding: 0;
      background: #15191c;
      font-family: 'Fira Mono', 'Hack', 'IBM Plex Mono', monospace;
      color: #39ff14;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
    }
    body::before {
      content:"";
      position:fixed; left:0; top:0; width:100vw; height:100vh; z-index:0;
      background: radial-gradient(circle at 60% 40%, #39ff14 0%, #2e67bc 30%, #15191c 100%);
      opacity:.13; pointer-events: none;
    }
    .access-container {
      width: 98vw;
      max-width: 410px;
      min-width: 280px;
      background: rgba(20,32,49,0.97);
      border-radius: 20px;
      border: 2.5px solid #39ff14b5;
      box-shadow: 0 18px 60px #39ff1450, 0 5px 38px #161a1c40;
      backdrop-filter: blur(7px);
      padding: 2.9em 2em 2.1em 2em;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: auto;
      position: relative;
      z-index: 2;
      animation: floatAccess 1.1s cubic-bezier(.31,1.2,.51,1) 1 forwards;
      opacity: 0.97;
    }
    @keyframes floatAccess {
      from { opacity:0; transform: translateY(65px) scale(0.96);}
      to { opacity:0.97; transform: none;}
    }
    .access-title {
      font-size: 2em;
      font-weight: 800;
      letter-spacing: 1.2px;
      margin: 0 0 0.56em 0;
      color: #39ff14;
      text-shadow: 0 2px 18px #39ff1480;
      background: linear-gradient(92deg,#39ff14 70%,#00ffd8 110%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-align: center;
    }
    .access-desc {
      font-size: 1.09em;
      color: #a7fcb5;
      text-align: center;
      font-weight: 500;
      line-height: 1.6;
      margin: 0 0 1.22em 0;
    }
    .access-info {
      background: rgba(27,38,42,0.38);
      color: #82ffd0;
      font-size: 0.97em;
      border-radius: 8px;
      padding: 0.86em 1.1em;
      margin-bottom: 1.29em;
      line-height: 1.56;
      width: 100%;
      text-align: left;
      box-shadow: 0 1px 10px #39ff1417;
    }
    .btn-contact {
      display: block;
      font-size: 1.13em;
      font-weight: 700;
      background: linear-gradient(92deg,#39ff14 50%,#00ffd8 200%);
      color: #191f29;
      border: none;
      border-radius: 10px;
      padding: 0.88em 1.65em;
      margin: 1.1em auto 0 auto;
      cursor: pointer;
      letter-spacing: 1.2px;
      box-shadow: 0 0 14px #39ff1450;
      transition: filter 0.18s, background 0.22s;
    }
    .btn-contact:hover, .btn-contact:focus {
      filter: brightness(1.10);
      outline: 2.4px solid #00ffd8;
    }
    .access-form {
      display: flex;
      flex-direction: column;
      width: 100%;
      margin-top: 2.1em;
    }
    .label-access {
      color: #61ffa3;
      font-size: 1.09em;
      font-weight: 700;
      letter-spacing: 1px;
      margin-bottom: 0.44em;
      text-align: left;
    }
    .input-code {
      width: 100%;
      font-size: 1.18em;
      background: #131a16;
      color: #39ff14;
      border: 2px solid #39ff1493;
      border-radius: 11px;
      padding: 1em 1em;
      font-weight: 650;
      margin-bottom: 1.12em;
      outline: none;
      letter-spacing: 1px;
      box-shadow: 0 2px 9px #39ff1433 inset, 0 1px 17px #003c1e19;
      text-align: center;
      transition: border 0.22s, box-shadow 0.17s;
      caret-color: #00ffd8;
    }
    .input-code:focus {
      border: 2px solid #00ffd8;
      background: #162c19;
      box-shadow: 0 2px 17px #39ff1485, 0 0 18px #00ffb333;
    }
    .unlock-btn {
      font-family: inherit;
      font-size: 1.18em;
      font-weight: 900;
      width: 100%;
      background: linear-gradient(90deg,#39ff14 70%,#00ffd8 100%);
      color: #182111;
      padding: 0.98em 0;
      border: none;
      border-radius: 11px;
      cursor: pointer;
      margin-bottom: 0.22em;
      letter-spacing: 1px;
      box-shadow: 0 0 18px #39ff1450;
      transition: background 0.14s, color 0.16s;
      outline: none;
    }
    .unlock-btn:hover, .unlock-btn:focus {
      background: linear-gradient(90deg,#00ffd8 33%,#39ff14 90%);
      color: #062a22;
    }
    .error-message {
      color: #fd2774;
      min-height: 1.3em;
      font-size: 1.03em;
      font-weight: 600;
      text-align: center;
      letter-spacing: .7px;
      margin-top: 0.4em;
      background: transparent;
      transition: color 0.16s;
    }
    @media (max-width:600px){
      .access-container { max-width: 99vw; padding: 1.5em 0.8em 1.5em 0.8em;}
      .access-title { font-size: 1.26em;}
      .access-form { margin-top: 1.2em;}
    }
    @media (min-width:1000px){ .access-container{ max-width: 490px; } }
  </style>
  <script src="https://pl28349850.effectivegatecpm.com/62/19/dc/6219dc3844e1bfbeba372bd8c1540438.js"></script>
</head>
<body>
<div class="access-container" role="main" aria-label="Secure access panel">
  <div class="access-title">Gatekeeper Access</div>
  <div class="access-desc">
    Welcome to <b>Gatekeeper</b>, a secure cyber lab for ethical hacking, CTFs, and advanced cyber education.
    Strictly limited to verified users, students, or participants with explicit authorization.
  </div>
  <div class="access-info">
    <span style="font-weight:bold; color:#00ffd8;">Why is access restricted?</span>
    <br>All content and tools are highly sensitive and for education or research only.<br><br>
    <span style="color:#39ff14; font-weight:600;">How do I get an access code?</span>
    <ul style="padding-left:1.1em; color:#82ffd0;">
      <li>Official invite from your event/instructor</li>
      <li>Admin validation (DM required)</li>
      <li>Participation in a verified training or hackathon</li>
    </ul>
    If youâ€™re unsure or need help, contact the admin directly below.
  </div>
  <button class="btn-contact" onclick="window.open('https://instagram.com/charan.ravanam','_blank')">
    Contact Admin
  </button>

  <form class="access-form" id="code-access-form" autocomplete="off" aria-label="Access code entry form">
    <label for="access-code" class="label-access">Enter Access Code</label>
    <input type="text" id="access-code" class="input-code" placeholder="Your access code" required maxlength="48" autocapitalize="off" inputmode="text" aria-label="Access Code">
    <button type="submit" class="unlock-btn" id="unlock-btn" aria-label="Unlock Access">Unlock</button>
    <div class="error-message" id="error-msg" aria-live="polite"></div>
  </form>
</div>
<script>
  const codeInput = document.getElementById('access-code');
  const codeForm = document.getElementById('code-access-form');
  const errorMsg = document.getElementById('error-msg');
  const unlockBtn = document.getElementById('unlock-btn');

  codeForm.onsubmit = async function (e) {
    e.preventDefault();
    errorMsg.textContent = '';
    unlockBtn.disabled = true;
    unlockBtn.textContent = "Checking...";
    const code = codeInput.value.trim();
    try {
      const res = await fetch('/.netlify/functions/verify-access', {
        method: 'POST',
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ code })
      });
      const data = await res.json();
      if (data.success) {
        localStorage.setItem("hasAccess", "true");
        document.body.style.background = "#10160c";
        setTimeout(() => { window.location.href = "/chat.html"; }, 520);
      } else {
        errorMsg.textContent = data.error || "Invalid or expired code. Contact admin for access.";
        codeInput.value = "";
        codeInput.focus();
      }
    } catch (err) {
      errorMsg.textContent = "Network error. Try again.";
    }
    unlockBtn.disabled = false;
    unlockBtn.textContent = "Unlock";
  };
  document.addEventListener('DOMContentLoaded', () => { codeInput.focus(); });
  codeInput.addEventListener('keydown', e => { if (e.key === "Enter") unlockBtn.click(); });
</script>
</body>
</html>
